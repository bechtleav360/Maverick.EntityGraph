
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://example.com/api/SimpleRestful/" rel="canonical"/>
<link href="../Schema/" rel="prev"/>
<link href="../Templates/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.6" name="generator"/>
<title>SimpleRestful - Entity Graph</title>
<link href="../../assets/stylesheets/main.558e4712.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#simple-but-opinionated-restful-api">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Entity Graph" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Entity Graph">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Entity Graph
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              SimpleRestful
            
          </span>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Entity Graph" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Entity Graph">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Entity Graph
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label aria-expanded="true" class="md-nav__link" for="__nav_2" tabindex="0">
          api
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="api" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          api
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Draft/">
        Draft
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Entities/Entities/">
        Entities
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Queries/">
        Queries
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Schema/">
        Schema
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          SimpleRestful
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        SimpleRestful
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
    Summary
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#api-methods">
    API Methods
  </a>
<nav aria-label="API Methods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#create-entity">
    Create Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#read-entity">
    Read Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#list-entities">
    List Entities
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#delete-entity">
    Delete Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#update-entity">
    Update Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-values">
    Get values
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-embedded-entity">
    Create embedded entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-relation">
    Create Relation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#delete-relation">
    Delete Relation
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Templates/">
        Templates
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_3" tabindex="0">
          architecture
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="architecture" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          architecture
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" id="__nav_3_1" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_3_1" tabindex="0">
          concepts
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="concepts" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
          concepts
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/concepts/entity/">
        entity
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" id="__nav_3_2" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_3_2" tabindex="0">
          graph
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="graph" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
          graph
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/graph/aspects/">
        aspects
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/graph/edge-attributes/">
        edge-attributes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/graph/layers/">
        layers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/graph/sharding/">
        sharding
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/graph/versioning/">
        versioning
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" id="__nav_3_3" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_3_3" tabindex="0">
          Schema
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Schema" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
          Schema
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/schema/events/">
        events
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/schema/validation/">
        validation
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/Backend/">
        Backend
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/BigPicture/">
        BigPicture
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/concepts.md">
        concepts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/Multitenancy.md">
        Multitenancy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/OPA/">
        OPA
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deploy/deploy.md">
        deploy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../features/multitenancy/">
        features
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../roadmap/">
        roadmap
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
    Summary
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#api-methods">
    API Methods
  </a>
<nav aria-label="API Methods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#create-entity">
    Create Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#read-entity">
    Read Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#list-entities">
    List Entities
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#delete-entity">
    Delete Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#update-entity">
    Update Entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-values">
    Get values
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-embedded-entity">
    Create embedded entity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-relation">
    Create Relation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#delete-relation">
    Delete Relation
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="simple-but-opinionated-restful-api">Simple (but opinionated) Restful Api</h1>
<h2 id="summary">Summary</h2>
<ul>
<li><code>GET /api/rs/{prefix.type}/{id}</code> (Read resource)</li>
<li><code>GET /api/rs/{id}</code></li>
<li><code>GET /api/rs/{prefix.type}</code> (List resources)</li>
<li><code>POST /api/rs/{prefix.type}</code> (Create resource)</li>
<li><code>DELETE /api/rs/{prefix.type}/{id}</code></li>
<li><code>PUT /api/rs/{prefix.type}/{id}</code></li>
<li><code>GET /api/rs/{prefix:type}/{id}/{key}</code> (Get value/s)</li>
<li><code></code></li>
<li><code></code></li>
</ul>
<hr/>
<p>What if we try to make the api as simple as possible?</p>
<p>Let's assume the following constraints:</p>
<ul>
<li>A node object always as a unique type registered in the schema</li>
<li>Embedded objects always have a unique type</li>
</ul>
<p>With those constraints in mind, we could build a simple JSON Api (no JSON-LD or RDF at all). Let's take the following
example model</p>
<pre><code class="language-yaml">record: 
  @type: Record
  @id: "4214214"
   title: "applications"
   cases: 
     - @type: Case
       @id: "2142132"
        status: "rejected"
   owner: 
     @type: OrganizationalUnit
     @id: "S12"
     description: "HR"

</code></pre>
<p>A few concepts:</p>
<ul>
<li><code>Values</code> are the literals of the current object (aka no JSON arrays or objects)</li>
<li>The type is typically prefixed with the namespace identifier. Since <code>:</code> and <code>#</code> are reserved characters, we use
  the <code>.</code></li>
<li>Types typically exist in a type hierarchy (subClassOf-Relations)</li>
<li>Composites are mereologic relations (aka parthood-relations). They habe to be a subPropertyOf of <code>partOf</code></li>
</ul>
<h2 id="api-methods">API Methods</h2>
<p>We could expose the following API Methods</p>
<h3 id="create-entity">Create Entity</h3>
<p><code>POST /api//{prefix.type}</code></p>
<p><code>POST /api/{prefix.type}/{id}</code></p>
<p>creates an entity</p>
<p><code>POST /api/mav.record</code></p>
<pre><code class="language-json">{
  "title": "applications"
}
</code></pre>
<p>will create a new entity of type "record" (from namespace with prefix <code>mav</code>) and a generated id. It probably violates
schema constraints (e.g. the owner is missing).
In this case, the request should throw a SchemaViolationError with the according message, the following request would
resolve this issue</p>
<pre><code class="language-json">{
  "title": "applications", 
  "owner": "OrganizationalUnit/S12"
}
</code></pre>
<p>If the given type does not exist in the schema, we throw an error as well.</p>
<p>If a json value consists of a pair "@type/@id", we can infer a connection of the given json ke</p>
<p><code>POST /api/mav.record/4214214</code></p>
<p>will create also the entity with the given id. Will fail if the id already exists (this operation might be only useful
to repair dangling incoming links by recovering an entity)</p>
<h3 id="read-entity">Read Entity</h3>
<p><code>GET /api/{prefix.type}/{id}</code></p>
<p><code>GET /api/{id}</code></p>
<p>return one or more entities.</p>
<p><code>GET /api/mav.record/4214214</code></p>
<p>Will return by default a simple json representation of the object and its direct neighbours.</p>
<pre><code class="language-json">{
  "type": "record",
  "id": "4214214",
  "name": "applications",
  "cases": [
    {
      "type": "case", 
      "id": "2142132", 
      "status": "rejected"
    }
  ], 
  "owner": {
    "type": "OrganizationalUnit",
    "id": "S12",
    "description": "HR"
  }

}
</code></pre>
<p>The response will always be in the type requested in the url. If the given type is a generalized type of the actual
entity type, an upcast will be performed. Let's say <code>record</code> is subClass of <code>http://schema.org/Thing</code>, which only
requires a title. The response for</p>
<p><code>GET /api/sdo.thing/4214214</code></p>
<p>would be</p>
<pre><code class="language-json">{
  "type": "thing",
  "id": "4214214",
  "name": "applications"
}
</code></pre>
<p>HATEOAS links could be build to further traverse the graph (or for downcasts), e.g. to show all documents in the cases.</p>
<p><code>GET /api/4214214</code>
will always return the entity in its most general form. This is only useful if an outdated link is requested (e.g. a
type conversion happened and the old type does not exist anymore).</p>
<h3 id="list-entities">List Entities</h3>
<p><code>GET /api/{prefix.type}</code></p>
<p>will return a paged list of all entities of the given type. It does support the same query operations as the main api.</p>
<h3 id="delete-entity">Delete Entity</h3>
<p><code>DELETE /api/{prefix.type}/{id}</code></p>
<p>Is a bit tricky for composites (e.g. the cases cease to exist if the records is deleted, the unit should of course
stay).</p>
<p>We could apply the following rules:</p>
<ul>
<li>if the relation (e.g. "cases") is a parthood-relation, it (and its children) will be deleted.</li>
<li>in any other case, only the relation itself will be deleted, the referred object stays</li>
</ul>
<p>Note that in way it doesn't matter which type (in a valid hierarchy) is given, the two following urls are equivalent</p>
<p><code>DELETE /api/sdo.thing/21312</code></p>
<p><code>DELETE /api/mav.record/21312</code></p>
<p>Since we don't typically now on which level of the hierarchy we operate.</p>
<h3 id="update-entity">Update Entity</h3>
<p><code>PUT /api/{prefix.type}/{id}</code></p>
<p>will always patch the values in the payload:</p>
<p><code>PUT /api/mav.records/4214214</code></p>
<pre><code class="language-json">{
  "description": "current job applications"
}
</code></pre>
<ul>
<li>an existing value is changed</li>
<li>a new value is added</li>
<li>a null value is deleted</li>
<li>any object or array in the payload leads to an error</li>
</ul>
<h3 id="get-values">Get values</h3>
<p><code>GET /api/{prefix.type}/{id}/{prefix.key}</code></p>
<p>will return the value of entity field, can be either a value, object or array. The response might contain annotations</p>
<p><code>GET /api/mav.case/093r9e039/mav.topic</code></p>
<pre><code class="language-json">{
  "value": "job application",
  "certainty": 0.24122
}
</code></pre>
<p><code>GET /api/mav.record/4214214/mav.owner</code></p>
<pre><code class="language-json">{
  "value": {
    "type": "OrganizationalUnit",
    "id": "S12",
    "description": "HR"
  }
}
</code></pre>
<h3 id="create-embedded-entity">Create embedded entity</h3>
<p><code>POST /api/record/4214214/case</code></p>
<p>with the body</p>
<pre><code class="language-json">{   
  "status": "open"
}
</code></pre>
<p>will create a new entity of type "Case" and create a connection to the "Record". It will return the case itself (with
it's direct neighbours again).
Note that the <code>case</code> relation must be defined in the schema as <code>hasPart/partOf</code>-Relation for this to work.</p>
<pre><code class="language-json">{
  "type": "Case",
  "id": "093r9e039",
  "status": "open",
  "record": {
    "type": "record",
    "id": "4214214",
    "title": "applications"
  }
}
</code></pre>
<p>The above request is equivalent to the request <code>POST /api/case</code> and the
call <code>POST /api/case/093r9e039/partOf/4214214</code> afterwards.
If an embedded object requires the existence of its parthood-relation, it will automatically marked as invalid.</p>
<p>To add a document to the case, we have to use</p>
<p><code>POST /api/case/093r9e039/documents</code></p>
<p>and so on. We only work on direct neighbours.</p>
<h3 id="create-relation">Create Relation</h3>
<p><code>POST /api/record/4214214/owner/S12</code></p>
<p>with an id of an existing entity and the body</p>
<pre><code class="language-json">{ }
</code></pre>
<p>will only create the relation. Any attributes in the body are annotations (eg. RDF-Star).</p>
<p>Constraints might be violated by this operation. The request
<code>POST /api/record/3221332/case/093r9e039</code> has not be allowed, since <code>case</code> is of type <code>hasPart</code>. It is bi-directional,
its creation will also trigger the creation of the according <code>partOf</code>-relation in the case.
But if a constraint has been defined that a case can only be part of exactly one record, this transaction must fail.</p>
<h3 id="delete-relation">Delete Relation</h3>
<p><code>DELETE /api/record/4214214/owner/S12</code></p>
<p>will delete the edge. Might throw a schema validation error, if the edge is required.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === "slate") {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>